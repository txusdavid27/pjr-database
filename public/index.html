<!doctype html>
<html lang="es">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Jugadores PJR</title>
<style>
  body{font-family:Arial, sans-serif;margin:0;background:#f4f6f8}
  header{background:#d48e3d;color:white;padding:1rem;text-align:center}
  .container{max-width:1100px;margin:1.25rem auto;padding:0 1rem}
  .grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(240px,1fr));gap:1rem}
  .card{background:white;border-radius:12px;box-shadow:0 6px 18px rgba(0,0,0,0.1);overflow:hidden}
  .card img{width:100%;height:200px;object-fit:cover;background:#dfe6ff}
  .card-body{padding:1rem}
  .player-name{font-weight:bold;font-size:1.1rem}
  .balance{padding:0.35rem 0.5rem;border-radius:8px;display:inline-block;margin-top:0.5rem;font-weight:bold}
  .pos{background:#ddffec;color:#00653b}
  .zero{background:#fff4e1;color:#8a5a00}
  .neg{background:#ffe3e3;color:#9b1b1b}
</style>
</head>
<body>
<header><h1>Jugadores PJR</h1></header>

<div class="container">
  <div id="status">Cargando jugadores...</div>
  <div id="grid" class="grid"></div>
</div>

<script>
function balanceClass(value){
  const n = Number(value) || 0;
  if(n > 0) return { cls: "pos", text: `A favor: ${n}` };
  if(n === 0) return { cls: "zero", text: `Tranqui (0)` };
  return { cls: "neg", text: `Por Pagar: ${n}` };
}

async function loadPlayers(){
  const status = document.getElementById("status");
  const grid = document.getElementById("grid");

  status.textContent = "Cargando...";

  const res = await fetch("/api/players");
  const players = await res.json();

  if(!players.length){
    status.textContent = "No hay jugadores.";
    return;
  }

  status.textContent = `Total jugadores: ${players.length}`;
  grid.innerHTML = "";

  players.forEach(p => {
    const card = document.createElement("div");
    card.className = "card";

    const img = document.createElement("img");
    img.src = p.photo;
    img.alt = p.name;

    const body = document.createElement("div");
    body.className = "card-body";

    const nameEl = document.createElement("div");
    nameEl.className = "player-name";
    nameEl.textContent = p.name;

    const b = balanceClass(p.balance);
    const bal = document.createElement("div");
    bal.className = `balance ${b.cls}`;
    bal.textContent = b.text;

    body.appendChild(nameEl);
    body.appendChild(bal);
    card.appendChild(img);
    card.appendChild(body);
    grid.appendChild(card);
  });
}

loadPlayers();
</script>

</body>
</html>